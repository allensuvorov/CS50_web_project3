{% extends "orders/base.html" %}

{% block title %}
    Menu
{% endblock %}

{% block body %}
    <h1>Hello, {{ user.first_name }}</h1>
    <ul>
        <li>Currently logged in as: {{ user.username}}, {{ user.id }}</li>
        <li><a href="{% url 'logout' %}">Logout</a></li>
    </ul>
    <h2>Menu</h2>
    <ul>
        {% for pizza in pizzas %}
        <li>
            {{ pizza }}
        </li>
        {% endfor %}
    </ul>
    
    <h2>Add Item to Shopping Cart</h2>
    
    {% if pizzas %}
        <h3>Pick a Pizza</h3>
        <form action="{% url 'cart' %}" method="post">
            {% csrf_token %}
            

            <select name="pizza_name">
                {% for pizza_name in pizza_names %}
                <option value="{{ pizza_name.id }}">{{ pizza_name }}</option>
                {% endfor %}
            </select>

            <select name="pizza_size">
                {% for pizza_size in pizza_sizes %}
                <option value="{{ pizza_size.id }}">{{ pizza_size }}</option>
                {% endfor %}
            </select>

            <select name="pizza_topping_combo">
                {% for pizza_topping_combo in pizza_topping_combos %}
                <option value="{{ pizza_topping_combo.id}}">{{ pizza_topping_combo }}</option>
                {% endfor %}
            </select>

            <select name="pizza_topping" multiple>
                {% for pizza_topping in pizza_toppings %}
                <option value="{{ pizza_topping.id }}">{{ pizza_topping }}</option>
                {% endfor %}
            </select>

            <input type="submit" value="Add to cart"/>
        </form>
    {% endif %}
    {% if cart %}
        <h3>Shopping Cart</h3>
        
        <!-- <p> {{ cart }} </p> -->
        
        <ul>
            {% for unit in cart %}

                <!-- <p>{{ unit.date }} {{ unit.user }} </p> -->
                <!-- <p>{{ unit.pizzas.all }}</p> -->

                {% for pizza in unit.pizzas.all %}
                    <li>{{ pizza }}</li>            
                {% endfor %}
                
            {% endfor %}
        </ul>    
            
    {% endif %}
{% endblock %}
